{{ define "layout" }}
{{ $root := .Cfg.Root }}
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>
{{ if eq .CurrentPage "index" }}
	{{ .Cfg.Title }}
	{{ if .Cfg.SubTitle }}
	- {{ .Cfg.SubTitle }}
	{{ end }}
{{ else if eq .CurrentPage "category" }}
	{{ .CurrentPageTitle }} - {{ .Cfg.Title }}
{{ else if eq .CurrentPage "tag" }}
	{{ .CurrentPageTitle }} - {{ .Cfg.Title }}
{{ else if eq .CurrentPage "post" }}
	{{ $post := index .Posts .CurrentPageIndex }}
	{{ $post.Title }} - {{ .Cfg.Title }}
{{ else if eq .CurrentPage "archives" }}
	归档 - {{ .Cfg.Title }}
{{ end }}
</title>
{{ template "head" . }}
</head>
<body>
<div id="container">
    <div id="wrap">
		{{ template "header" .}}
        <div class="outer">
			<section id="main">
			{{ if eq .CurrentPage "index"}}
				{{ range $post := .Posts }}
				{{ template "article" . }}
				{{ end }}

				{{ if gt .PageNav.PageCount 0 }}
                    <nav id="page-nav">
					{{ $currentPageIndex := .CurrentPageIndex }}
					{{ $NextPageIndex := .NextPageIndex }}
					{{ $PrevPageIndex := .PrevPageIndex }}
					{{ $PaginationDir := .Cfg.PaginationDir }}
					{{ if gt $currentPageIndex 1 }}
						{{ if eq $PrevPageIndex 1 }}
						<a class="extend prev" rel="prev" href="{{ $root }}">« Prev</a>
						{{ else }}
                        <a class="extend prev" rel="prev" href="{{ $root }}{{ $PaginationDir }}/{{ $PrevPageIndex }}/">« Prev</a>
                        {{ end }}
					{{ end }}

					{{range $i := .PageNav.PageSlice }}
					{{ if eq $i 1 }}
                        <a class="page-number" href="{{ $root }}">{{ $i }}</a>
					{{ else if eq $i $currentPageIndex }}
                        <span class="page-number current">{{ $i }}</span>
					{{ else }}
                        <a class="page-number" href="{{ $root }}{{ $PaginationDir }}/{{ $i }}/">{{ $i }}</a>
					{{ end }}
					{{ end }}

					{{ if gt .PageNav.PageCount $currentPageIndex }}
                        <a class="extend next" rel="next" href="{{ $root }}{{ $PaginationDir }}/{{ $NextPageIndex }}/">Next »</a>
					{{ end }}
                    </nav>
				{{ end }}
			{{ else if eq .CurrentPage "category" }}
            <section class="archives-wrap">
                <div class="archive-title-wrap">
					<span class="archive-title">{{ .CurrentPageTitle }}</span>
                </div>
                <div class="archives">
				{{ range $post := .Posts }}
				{{ template "archive-post" $post }}
				{{ end }}
				</div>
			</section>
			{{ else if eq .CurrentPage "tag" }}
			<section class="archives-wrap">
                <div class="archive-title-wrap">
                    <span class="archive-title">{{ .CurrentPageTitle }}</span>
                </div>
				<div class="archives">
				{{ range $post := .Posts }}
				{{ template "archive-post" $post }}
				{{ end }}
				</div>
			</section>
			{{ else if eq .CurrentPage "archives" }}
			<section class="archives-wrap">
				{{ range $m, $posts := .Archives }}
                <div class="archive-title-wrap">
                    <span class="archive-title">{{ $m }}</span>
                </div>
				<div class="archives">
					{{ range $post := $posts }}
					{{ template "archive-post" $post }}
					{{ end }}
				</div>
				{{ end }}
			</section>
			{{ else if eq .CurrentPage "post" }}
				{{ $post := index .Posts .CurrentPageIndex }}
				{{ template "article" $post }}
			{{ end }}
			</section>
			{{ if .ThemeCfg.Sidebar }}
			{{ template "sidebar" . }}
			{{ end }}
		</div>
		{{ template "footer" . }}
	</div>
</div>
</body>
</html>
{{ end }}